<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Skribbl 2</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="styles.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/8.0.0/signalr.min.js" crossorigin="anonymous"></script>
</head>
<body>
    <div class="container">
        <header><h1>Skribbl 2</h1></header>

        <div class="layout">
            <!-- Left column -->
            <div class="left">
                <section class="user" id="userSection">
                    <!-- Painter toggle button and user name on same row -->
                    <div id="userNameRow" class="inline" style="margin-top:8px; align-items:center;">
                        <button id="painterBtn" class="toggle-btn" aria-pressed="false" type="button">I am the painter</button>
                        <select id="userName" style="flex:1;">
                            <option value="" disabled selected>Select your name</option>
                        </select>
                    </div>
                </section>

                <section class="painter" id="painterSection" style="display:none;">
                    <h2>Painter's Answer</h2>
                    <div class="inline">
                        <input id="answerInput" type="text" placeholder="Enter answer word (visible)" />
                        <button id="setAnswerBtn" type="button">Set Answer</button>
                    </div>
                </section>

                <section class="guess" id="guessSection">
                    <h2>Make a Guess</h2>
                    <div class="inline">
                        <input id="guessInput" type="text" placeholder="Type your guess" />
                        <button id="guessBtn" type="button">Guess</button>
                    </div>
                </section>

                <!-- Paint area: canvas is visible to everyone; controls only to painter -->
                <section class="paint" id="paintSection">
                    <h2>Draw</h2>
                    <div class="inline" style="gap:8px; align-items:center; flex-direction:column;">
                        <canvas id="paintCanvas" width="1280" height="800" style="border:1px solid #ccc; background:#fff; width:100%; max-width:1280px;"></canvas>
                        <div id="paintControls" class="inline" style="gap:12px; align-items:center; justify-content:flex-start; width:100%; max-width:1280px; display:none; flex-wrap:wrap;">
                            <!-- Shape/tool buttons -->
                            <div id="toolButtons" class="tool-buttons">
                                <button class="icon-btn" data-tool="freehand" title="Freehand" aria-label="Freehand">✎</button>
                                <button class="icon-btn" data-tool="line" title="Line" aria-label="Line">⎯</button>
                                <button class="icon-btn" data-tool="rect" title="Rectangle" aria-label="Rectangle">▭</button>
                                <button class="icon-btn" data-tool="circle" title="Circle" aria-label="Circle">◯</button>
                            </div>
                            <!-- Predefined color palette placed between tool and color picker -->
                            <div id="colorPalette" class="color-palette" style="flex: none;">
                                <button class="color-swatch" data-color="#000000" style="background-color:#000000" aria-label="Black"></button>
                                <button class="color-swatch" data-color="#8b4513" style="background-color:#8b4513" aria-label="Brown"></button>
                                <button class="color-swatch" data-color="#006400" style="background-color:#006400" aria-label="Dark Green"></button>
                                <button class="color-swatch" data-color="#0000ff" style="background-color:#0000ff" aria-label="Blue"></button>
                                <button class="color-swatch" data-color="#ff00ff" style="background-color:#ff00ff" aria-label="Magenta"></button>
                                <button class="color-swatch" data-color="#ff0000" style="background-color:#ff0000" aria-label="Red"></button>
                                <button class="color-swatch" data-color="#808080" style="background-color:#808080" aria-label="Gray"></button>
                                <button class="color-swatch" data-color="#ffa500" style="background-color:#ffa500" aria-label="Orange"></button>
                                <button class="color-swatch" data-color="#ffff00" style="background-color:#ffff00" aria-label="Yellow"></button>
                                <button class="color-swatch" data-color="#00ffff" style="background-color:#00ffff" aria-label="Cyan"></button>
                            </div>
                            <label>
                                <input id="paintColor" type="color" value="#000000" />
                            </label>
                            <label>
                                Size:
                                <input id="paintSize" type="range" min="1" max="20" value="4" />
                            </label>
                            <button id="paintClearBtn" type="button">Clear</button>
                        </div>
                    </div>
                </section>

                <section class="history">
                    <h2>History</h2>
                    <ul id="historyList" class="history-list"></ul>
                </section>
            </div>

            <!-- Right column -->
            <div class="right">
                <section class="status">
                    <div id="statusText">Waiting for answer...</div>
                </section>

                <section class="actions" id="resetSection">
                    <div class="inline" style="display:flex; gap:8px;">
                        <button id="resetKeepResultsBtn" style="flex:1" type="button">Reset</button>
                        <button id="resetWithResultsBtn" style="flex:1" type="button">Reset Game</button>
                    </div>
                </section>

                <!-- Current topic section -->
                <section class="topic" id="topicSection" style="margin-bottom:12px;">
                    <div class="inline" style="justify-content:space-between; align-items:center; gap:8px;">
                        <span id="topicLabel" style="text-align:left; color:#ffffff;">Current topic:</span>
                        <span id="topicValue" style="flex:1; text-align:center; font-weight:bold; color:#22c55e;"></span>
                    </div>
                    <div class="inline" style="margin-top:8px; gap:8px;">
                        <input id="topicInput" type="text" placeholder="Type new topic" style="flex:1;" />
                    </div>
                    <div class="inline" style="margin-top:8px;">
                        <button id="setTopicBtn" type="button" style="display:none; width:100%; background-color:#22c55e; color:#000;">Set new topic</button>
                    </div>
                </section>

                <section class="results">
                    <h2>Results</h2>
                    <table id="resultsTable">
                        <thead>
                            <tr><th>Name</th><th>Points</th></tr>
                        </thead>
                        <tbody id="resultsBody"></tbody>
                    </table>
                </section>

                <!-- Painter-only: manage players section under results -->
                <section class="manage-players" id="managePlayersSection" style="display:none; margin-top:12px;">
                    <div class="inline" style="gap:8px; flex-direction:column;">
                        <input id="managePlayerName" type="text" placeholder="Type player name" />
                        <div class="inline" style="gap:8px; width:100%;">
                            <button id="addPlayerBtn" style="flex:1" type="button">Add player</button>
                            <button id="deletePlayerBtn" style="flex:1" type="button">Delete player</button>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>
    <script src="app.js"></script>
</body>
</html>